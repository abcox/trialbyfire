<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <style>
    body {
        font-family: "Roboto", sans-serif;
        /* font-weight: 200; */
        font-style: normal;
        color: black;
        background-color: #ADE1E5;
    }
    h1 {
        font-size: 3em;
        font-weight: 500;
    }
    h2 {
        font-size: 2em;
        font-weight: 500;
        margin: .5em 0;
    }
    p {
        font-weight: 500;
        color: black;
    }
    .container {
        /* display: flex;
        flex-wrap: wrap;
        justify-content: center; */
        margin: 20px;
    }
    .card {
        border-radius: 10px;
        background: #79C7C5;
        box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
        margin: 20px 0;
        max-width: 450px;
        padding: 20px;
        max-height: 300px;
        overflow-x: hidden;
        overflow-y: auto;
    }
    .field {
        margin: 20px 0;
    }
    section {
        margin: 20px 0;
        /* max-width: 300px; */
    }
    label {
        font-weight: 500;
        display: block;
        margin-bottom: 10px;
    }
    input, textarea {
        width: 100%;
        padding: 10px;
        border-radius: 5px;
        border: none;
    }
    button {
        padding: 10px 20px;
        border-radius: 10px;
        border: none;
        background: #4CAF50;
        color: white;
        font-size: 1em;
        cursor: pointer;
    }
    .read-time {
        font-size: .8em;
        color: #666;
    }
    </style>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Blog</title>
</head>
<body>
    <div class="container">
        <h1>My Blog</h1>
        <section id="viewer-section">
            <!-- generated -->
        </section>
        <section>
            <h2>Create Posts</h2>
            <form id="main-form">
                <div class="field">
                    <label for="title">Title</label>
                    <input type="text" id="title" name="title">
                </div>
                <div class="field">
                    <label for="content">Content</label>
                    <textarea id="content" name="content"></textarea>
                </div>
                <button type="submit">Create</button>
            </form>
        </section>
    </div>
    <script>
        const articles = [
                {
                    "title": "My Article 1",
                    "content": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
                },
                {
                    "title": "My Article 2",
                    "content": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna"
                }
            ];

        const readTimeMins = (content) => Math.ceil(content.match(/\S+/g).length / 200);

        articles.forEach(article => {
            const viewerSection = document.getElementById('viewer-section');
            viewerSection.innerHTML += `<article class="card">
                <h2>${article.title}</h2>
                <span class="read-time">${readTimeMins(article.content)} min read</span>
                <p>${article.content}</p>
            </article>`;
        });

        // add new post to viewer section
        // early vs. late binding
        // alt. method involved form submit event?
        const form = document.getElementById('main-form');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const data = {
                title: formData.get('title'),
                content: formData.get('content')
            };
            console.log(JSON.stringify(data));

            // Did my Copilot suggest a backend?
            //const response = await fetch('http://localhost:3000/posts', {
            //    method: 'POST',
            //    headers: {
            //        'Content-Type': 'application/json'
            //    },
            //    body: JSON.stringify(data)
            //});
            //const result = await response.json();
            //console.log(result);

            // For now, let's just add the data to the viewer
            var viewerSection = document.getElementById('viewer-section');
            viewerSection.innerHTML += `<article class="card">
                <h2>${data.title}</h2>
                <span class="read-time">${readTimeMins(article.content)} min read</span>
                <p>${data.content}</p>
            </article>`;
        });
    </script>
</body>
</html>
